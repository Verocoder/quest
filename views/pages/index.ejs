<!DOCTYPE html>
<html>
  <head>
    <% include ../partials/header.ejs %>

  </head>

  <body>

    <% include ../partials/nav.ejs %>

    <h1 class="text-center"> Quest <small>with the Natural History Museum</small> </h1>

    <div class="row"> <br></div>

    <div class="row">
      <div class="col-md-6 col-md-offset-1 well map" id="nickyMap"></div>
      <div class="col-md-3 col-md-offset-1 well" id="nickyList">
        Discoveries
      </div>
    </div>

    <div class="row"> <br></div>

    <!-- <div id="nickyList" class="col-md-10 col-md-offset-1 well">
      Discoveries
    </div> -->

    <div class="row"> <br></div>

    <% include ../partials/footer.ejs %>
    <script>
      var nickyMap = new Mapping("nickyMap","nickyList");
      function onMapMove(e) {
        nickyMap.requestDiscoveries(nickyMap.map.getBounds());
        //nickyMap.map.getBounds()
        //getCenter
        // method to get the box for more useful API lookups
      };
      function onLocationFound(e) {
        var radius = e.accuracy / 2;
        var latlng = e.latlng;
        nickyMap.foundGeo(latlng,radius);
      }

      //listeners
      nickyMap.map.on('moveend', onMapMove);
      nickyMap.map.on('locationfound', onLocationFound);
    </script>

  </body>

</html>
